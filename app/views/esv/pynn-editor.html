<!-- build:css(.tmp) styles/esv/pynn-editor.css -->
<link rel="stylesheet" href="styles/esv/pynn-editor.css" />
<!-- endbuild -->

<div class="pynn-editor-widget">
  <h3>PyNN Brain Editor</h3>
  <p><a target="_blank" href="http://neuralensemble.org/PyNN/">PyNN</a> (pronounced 'pine') is a simulator-independent language for building neuronal network models.
    Network model scripts may use the PyNN API to load a network, but the network must not be executed.
    However, there are <a target="_blank" href="{{platformDocumentationURL}}/nrp/user_manual/simulation_setup/hard_reset.html">a few points</a> that should be taken into consideration when changing neuronal networks during a simulation.
  </p>
  <div ng-show="pynnScript === undefined" class="alert alert-info" role="alert">
    There is no PyNN script available for this experiment.
  </div>
  <div ng-show="pynnScript !== undefined" >
    <hr>
    <div ng-include src="'views/esv/pynn-editor-buttons.html'"></div>
    <hr>
    <p>Populations (set of neurons indices) can be defined here and referred to in transfer functions:
    </p>
    <form name="populationForm">
      <table class="table table-striped">
        <thead>
        <tr>
          <th>Name</th>
          <th colspan="3">Neuron indices</th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="(population, indices) in populations">
          <td>
            <input type="text" size="25" ng-model="population" required>
            </input>
          </td>
          <td ng-if-start="isSlice(indices)">
            <label>from</label>
            <input size="5" type="number" class="neuron-index-field" ng-model="indices.from" min="0" placeholder="0" required>
            </input>
          </td>
          <td><label>to</label>
            <input size="5" type="number" class="neuron-index-field" ng-model="indices.to" min="1" required placeholder="1">
            </input>
          </td>
          <td ng-if-end><label>step</label>
            <input size="5" type="number" class="neuron-index-field" ng-model="indices.step" min="1" placeholder="1" required>
            </input>
          </td>
          <td ng-if="!isSlice(indices)" colspan="3">
            <input size="40" type="text" ng-model="indices.list"
                   ng-pattern="/^\s*\d+\s*(\,\s*\d+\s*)*$/" required>
            </input>
          </td>
          <td>
            <button type="button" class="btn btn-default btn-md" ng-click="deletePopulation(population);">
              <i class="glyphicon glyphicon-remove"></i><span> Delete</span>
            </button>
          </td>
        </tr>
        </tbody>
      </table>
      <button type="button" class="btn btn-default btn-md" ng-click="addList()">
        <i class="glyphicon glyphicon-star"></i><span> New list</span>
      </button>
      <button type="button" class="btn btn-default btn-md" ng-click="addSlice()">
        <i class="glyphicon glyphicon-star"></i><span> New slice</span>
      </button>
    </form>
    <hr>
    <div id="codeEditor" ui-codemirror ui-codemirror-opts="{
          lineWrapping: true,
          lineNumbers: true,
          readOnly: false,
          indentUnit: 4,
          mode: 'text/x-python'
      }"
         ng-model="pynnScript"
         ui-refresh='refreshCodemirror'>
    </div>
    <hr>
    <div ng-include src="'views/esv/pynn-editor-buttons.html'"></div>
  </div>
</div>
